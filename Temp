// ==UserScript==

2

// @name         Neopets TVW Notify

3

// @version      2024-07-10-v2

4

// @description  Sends you a notification when your Neopet has finished volunteering!

5

// @author       Daniel Law

6

// @match        https://www.neopets.com/*

7

// @icon         https://www.neopets.com/favicon.ico

8

// @downloadURL  https://github.com/daniel-law/neopets-tvw-notify/raw/master/script.user.js

9

// @updateURL  https://github.com/daniel-law/neopets-tvw-notify/raw/master/script.user.js

10

// @grant        none

11

// ==/UserScript==

12

​

13

(function() {

14

'use strict';

15

​

16

        Date.prototype.addSeconds = function(seconds) {this.setSeconds(this.getSeconds() + seconds);return this;};

17

        Date.prototype.addMinutes = function(minutes) {this.setMinutes(this.getMinutes() + minutes);return this;};

18

        Date.prototype.addHours = function(hours) {this.setHours(this.getHours() + hours);return this;};

19

​

20

        let shiftEnd = localStorage.getItem("tvw-bfbi-shiftend");

21

        let alerts = document.querySelector("#alerts > ul");

22

​

23

        // Clear out the text as we are adding our own notification.

24

        document.querySelector("#alerts > ul > .alerts-none__2020").innerHTML = ""

25

​

26

        function updateNotificationsNumber() {

27

            let notificationsNumber = parseInt(document.getElementById("NavAlertsNotif").innerHTML);

28

            let notificationsEl = document.getElementById("NavAlertsNotif");

29

​

30

            if (notificationsNumber) {

31

                notificationsNumber++;

32

            } else {

33

                notificationsNumber = 1;

34

            }

35

​

36

            // Add the new number and style.

37

            notificationsEl.innerHTML = notificationsNumber;

38

            notificationsEl.style.display = "block";

39

            notificationsEl.style.background = "#FF46FF";
